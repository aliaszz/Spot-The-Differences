<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style type="text/css">
        #canvas1{}
    </style>
</head>
<body>
<canvas id="canvas1" width="450" height="450" style="border: 1px solid red;"></canvas>
<canvas id="canvas2" width="450" height="450" style="border: 1px solid blue;"></canvas>
<canvas id="canvas3" width="450" height="450" style="border: 1px solid green;"></canvas>
<img src="img3.png" id="img1" style="display:none;">
<img src="img4.png" id="img2" style="display:none;">
<p id="imgdtData"></p>
<script>
//    window.onload = function(){
//        var c=document.getElementById('canvas1');
//        var ctx=c.getContext("2d");
//        var img=document.getElementById("img1");
//        ctx.drawImage(img,10,10);
//    }
window.onload = function(){
    var canvas = document.getElementById('canvas1');
    var ctx    = canvas.getContext('2d');
    var img    = document.getElementById('img1');
    ctx.drawImage(img, 0, 0);

    var w      = img.naturalWidth;
    var h      = img.naturalHeight;
    var imgdt  = ctx.getImageData(0, 0, w, h);
    var a      = imgdt.data;
    document.getElementById('imgdtData').innerHTML=a;

//    for (var k=0; k<a.length; k+=4)
//    {
//        a[k  ] = 255 - a[k  ];  // R
//        a[k+1] = 255 - a[k+1];  // G
//        a[k+2] = 255 - a[k+2];  // B
//        a[k+3] = 255;           // A
//    }

    canvas.width = w;
    canvas.height = h;
    ctx.putImageData(imgdt, 0, 0);




    var canvas2 = document.getElementById('canvas2');
    var ctx2 = canvas2.getContext('2d');
    var img2 = document.getElementById('img2');
    ctx2.drawImage(img2, 0, 0);

    var w2      = img2.naturalWidth;
    var h2      = img2.naturalHeight;
    var imgdt2  = ctx2.getImageData(0, 0, w2, h2);
    var a2      = imgdt2.data;
//    document.getElementById('imgdtData').innerHTML=a2;
//    for (var k=0; k<a2.length; k+=4)
//    {
//        a2[k  ] = 255 - a2[k  ];  // R
//        a2[k+1] = 255 - a2[k+1];  // G
//        a2[k+2] = 255 - a2[k+2];  // B
//        a2[k+3] = 255;           // A
//    }
    canvas2.width = w2;
    canvas2.height = h2;
    ctx2.putImageData(imgdt2, 0, 0);



    var canvas3 = document.getElementById('canvas3');
    var ctx3 = canvas3.getContext('2d');
    var imgdt3 = ctx3.getImageData(0, 0 , w2, h2);
    var a3 = imgdt3.data;

    for (var k=0; k< a.length; k+=4)
    {
        if(a[k] != a2[k] && a[k+1] != a2[k+1] && a[k+2] != a2[k+2]){//不同
//        if(a[k] == a2[k] && a[k+1] == a2[k+1] && a[k+2] == a2[k+2] && a[k+3] == a2[k+3]){


            a3[k] = 255 - 255;  // R
            a3[k + 1] = 255 - 255;  // G
            a3[k + 2] = 255 - 255;  // B
            a3[k + 3] = 255;           // A
        }else{
            a3[k] = a[k];
            a3[k + 1] = a[k + 1];
            a3[k + 2] = a[k + 2];
            a3[k + 3] = a[k + 3];
        }
//        if(a[k] != a2[k] || a[k+1] != a2[k+1] || a[k+2] != a2[k+2] || a[k+3] != a2[k+3]){
////        if(a[k] == a2[k] && a[k+1] == a2[k+1] && a[k+2] == a2[k+2] && a[k+3] == a2[k+3]){
//            a3[k] = 255 - 255;  // R
//            a3[k + 1] = 255 - 255;  // G
//            a3[k + 2] = 255 - 255;  // B
//            a3[k + 3] = 255;           // A
//        }else{
//            a3[k] = a[k];
//            a3[k + 1] = a[k + 1];
//            a3[k + 2] = a[k + 2];
//            a3[k + 3] = a[k + 3];
//        }
    }

    canvas3.width = w2;
    canvas3.height = h2;
    ctx3.putImageData(imgdt3, 0, 0);


}
</script>
</body>
</html>